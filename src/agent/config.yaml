# Agent 配置（YAML）。可用于替代环境变量。
# 采用通用 OpenAI 接口键名，仍兼容旧的 DEEPSEEK_* 配置。
OPENAI_API_URL: https://api.deepseek.com
OPENAI_API_KEY: sk-75a7de81a91349019169eb70162f36a8
OPENAI_MODEL: deepseek-chat
# 可选：设置 MCP 地址（MCP 服务地址）
MCP_BASE_URL: http://localhost:8000

# ========================================
# 对话记忆配置
# ========================================
memory:
  # 是否启用记忆功能
  enabled: true
  
  # 记忆后端类型: "chromadb" 或 "basic"
  backend: "chromadb"
  
  # ChromaDB 配置
  chromadb:
    # 持久化存储目录
    persist_directory: "data/chroma_memory"
    # Collection 名称
    collection_name: "conversation_memory"
    # 嵌入模型名称 (all-MiniLM-L6-v2 是轻量级模型)
    embedding_model: "all-MiniLM-L6-v2"
  
  # 记忆使用策略
  strategy:
    # 上下文检索方式: "recent" (最近N条) 或 "similarity" (语义相似)
    retrieval_mode: "recent"
    
    # 最近模式: 返回最近的 N 条记录
    max_recent_turns: 10
    
    # 相似度模式: 返回最相似的 N 条记录
    max_similarity_results: 5
    # 相似度阈值 (0-1, 越高越严格)
    similarity_threshold: 0.5
    
    # 是否启用 LLM 摘要生成
    enable_llm_summary: true
    
    # 摘要生成策略
    summary:
      # 自动生成摘要的触发条件: "always" (每轮), "threshold" (超过阈值), "manual" (手动)
      trigger: "threshold"
      # 对话轮数阈值
      turns_threshold: 10
      # 文本长度阈值(字符数)
      text_length_threshold: 500
      # 摘要最大长度(字符数)
      max_summary_length: 200
  
  # 会话管理
  session:
    # 默认会话ID前缀
    default_session_prefix: "session"
    # 会话超时时间(秒), 0表示永不超时
    timeout: 0
    # 是否自动清理过期会话
    auto_cleanup: false
  
  # 性能优化
  performance:
    # 是否启用内存缓存
    enable_cache: true
    # 缓存最大条目数
    cache_size: 1000000
    # 批量操作大小
    batch_size: 10